<!DOCTYPE html>
<html lang="de">

<head>
       
    <meta charset="UTF-8">
       
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Kopfrechnen-Trainer</title>
        <style>
        /* Material You Farbpalette (Beispiel - helle Variante als Standard) */
        :root {
            --md-sys-color-primary: #6750a4;
            /* Primärfarbe (z.B. Nächste Aufgabe Button) */
            --md-sys-color-on-primary: #ffffff;
            /* Text auf Primärfarbe */
            --md-sys-color-background: #fffbfe;
            /* Hintergrund (nicht für Body) */
            --md-sys-color-on-background: #1c1b1f;
            /* Text auf Hintergrund */
            --md-sys-color-surface: #fffbfe;
            /* Oberfläche (für Hover Textfarbe) */
            --md-sys-color-on-surface: #1c1b1f;
            /* Text auf Oberfläche (für Hover Textfarbe) */
            --md-sys-color-surface-container-high: #eee8f4;
            /* Oberfläche Container (Widget Hintergrund) */
            --md-sys-color-surface-container: #f3edfa;
            /* Oberfläche Container (z.B. Antwort Button Hintergrund) */
            --md-sys-color-on-surface-container: #1c1b1f;
            /* Textfarbe auf Oberfläche Container */
            --md-sys-color-error: #b3261e;
            /* Fehlerfarbe (z.B. falsches Feedback) */
            --md-sys-color-success: #4CAF50;
            /* Eigene Erfolgsfarbe */
            --md-sys-color-on-success: #ffffff;
            /* Text auf Erfolgsfarbe */
            --md-sys-color-correct-highlight: #d9ead3;
            /* Farbe für richtige Antwort Hervorhebung (leicht grünlich) */


            /* Schattenfarbe */
            --md-sys-shadow-color: rgba(0, 0, 0, 0.15);
        }

        /* Material You Farbpalette (Beispiel - dunkle Variante) */
        @media (prefers-color-scheme: dark) {
            :root {
                --md-sys-color-primary: #d0bcff;
                --md-sys-color-on-primary: #381e72;
                --md-sys-color-background: #1c1b1f;
                --md-sys-color-on-background: #e6e1e5;
                --md-sys-color-surface: #1c1b1f;
                --md-sys-color-on-surface: #e6e1e5;
                --md-sys-color-surface-container-high: #36343b;
                --md-sys-color-surface-container: #2a282d;
                --md-sys-color-on-surface-container: #e6e1e5;
                --md-sys-color-error: #f2b8b5;
                --md-sys-color-success: #81C784;
                /* Helleres Grün für Dark Mode */
                --md-sys-color-on-success: #1b5e20;
                --md-sys-color-correct-highlight: #3a4f3c;
                /* Farbe für richtige Antwort Hervorhebung (dunkler, grünlich) */


                /* Schattenfarbe für dunklen Modus */
                --md-sys-shadow-color: rgba(0, 0, 0, 0.4);
            }
        }

        body {
            background-color: transparent;
            /* Hintergrund des Bodys transparent */
            display: flex;
            /* Aktiviere Flexbox für das Body-Element */
            justify-content: center;
            /* Horizontale Zentrierung */
            align-items: center;
            /* Vertikale Zentrierung (optional, je nach Notion-Einbettung) */
            min-height: 100vh;
            /* Stelle sicher, dass der body die volle Höhe des sichtbaren Bereichs hat (innerhalb des iFrame) */
            margin: 0;
            /* Entferne Standard-Margins des Body */
            font-family: 'Roboto', sans-serif;
            /* Material You Schrift */
            padding: 20px;
            box-sizing: border-box;
        }

        .widget {
            display: flex;
            /* Flexbox, um Inhalt zu verteilen */
            flex-direction: column;
            justify-content: space-between;
            /* Inhalt vertikal verteilen */

            background-color: var(--md-sys-color-surface-container-high);
            /* Hintergrund aus Palette */
            color: var(--md-sys-color-on-surface-container);
            /* Textfarbe aus Palette */
            padding: 24px;
            /* Mehr Padding */
            border-radius: 28px;
            /* Stärker abgerundete Ecken */
            text-align: center;
            width: 340px;
            /* Breite beibehalten */
            min-height: 220px;
            /* Mindesthöhe beibehalten */
            box-shadow: 0 4px 8px var(--md-sys-shadow-color);
            /* Subtiler Schatten */
            transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
            box-sizing: border-box;
            /* Padding in Breite/Höhe einschließen */
        }

        #aufgabe {
            font-size: 1.6em;
            /* Größer */
            font-weight: bold;
            margin-bottom: 24px;
            /* Mehr Abstand */
            flex-grow: 1;
            /* Aufgabe darf wachsen und Platz einnehmen */
            display: flex;
            /* Flexbox für Zentrierung */
            justify-content: center;
            align-items: center;
            color: var(--md-sys-color-on-surface-container);
            /* Textfarbe aus Palette */
            transition: color 0.3s ease;
            min-height: 1.8em;
            /* Mindesthöhe, um Layout-Sprünge zu vermeiden */
        }

        /* === Flexbox-Workaround für 2x2 Antworten === */
        .antworten {
            display: flex;
            /* Schaltet Flexbox ein */
            flex-direction: row;
            /* Elemente in einer Reihe anordnen */
            flex-wrap: wrap;
            /* Erlaubt Umbruch in die nächste Zeile */
            justify-content: space-between;
            /* Verteilt Platz zwischen den Items (hilft bei 2 pro Reihe) */
            gap: 16px;
            /* Abstand zwischen Flex-Elementen (Buttons) */
            margin-bottom: 24px;
        }

        /* === Ende Flexbox-Workaround === */


        .antworten button {
            background-color: var(--md-sys-color-surface-container);
            /* Hintergrund aus Palette */
            color: var(--md-sys-color-on-surface-container);
            /* Textfarbe aus Palette */
            border: none;
            padding: 16px 12px;
            /* Vertikales Padding erhöht, Horizontal leicht reduziert */
            border-radius: 16px;
            /* Stärker abgerundete Ecken */
            cursor: pointer;
            font-size: 1.2em;
            /* Größer */
            transition: background-color 0.2s ease, box-shadow 0.2s ease, color 0.2s ease;
            /* Übergang auch für Textfarbe */
            box-shadow: 0 1px 3px var(--md-sys-shadow-color);
            /* Subtiler Schatten */

            /* NEU: Breite berechnen, damit 2 Buttons pro Reihe passen */
            width: calc(50% - 8px);
            /* 50% der Breite minus halber Gap */
            box-sizing: border-box;
            /* Sicherstellen, dass Padding und Border in der Breite enthalten sind */

            /* Flexbox-spezifische Eigenschaften, die im Flex-Wrap-Workaround helfen */
            flex-grow: 0;
            /* Verhindern, dass Buttons über ihre berechnete Breite hinaus wachsen */
            flex-shrink: 0;
            /* Verhindern, dass Buttons unter ihre berechnete Breite schrumpfen */
            /* min-width: 80px; */
            /* Nicht mehr zwingend nötig, da Breite berechnet wird */
        }

        .antworten button:hover {
            background-color: #d9cadd;
            /* Leicht dunkler/andere Oberfläche beim Hover (Beispiel) */
            box-shadow: 0 2px 4px var(--md-sys-shadow-color);
            /* Schatten beim Hover erhöhen */
            color: black;
            /* Textfarbe beim Hover für besseren Kontrast */
        }

        /* Stil für den richtig hervorgehobenen Button */
        .antworten button.correct-answer-highlight {
            background-color: var(--md-sys-color-correct-highlight);
            /* Farbe aus Palette */
            box-shadow: 0 2px 4px var(--md-sys-shadow-color);
            /* Schatten leicht erhöhen */
            /* Textfarbe bleibt on-surface-container, sollte darauf gut lesbar sein */
        }

        /* Optional: Stil für deaktivierte Buttons nach der Auswahl */
        .antworten button:disabled {
            opacity: 0.7;
            /* Leicht transparent, wenn deaktiviert */
            cursor: default;
        }

        .antworten button:disabled:hover {
            background-color: var(--md-sys-color-surface-container);
            /* Hover auf Disabled entfernen */
            box-shadow: 0 1px 3px var(--md-sys-shadow-color);
            color: var(--md-sys-color-on-surface-container);
            /* Textfarbe zurücksetzen */
        }

        .antworten button.correct-answer-highlight:disabled:hover {
            background-color: var(--md-sys-color-correct-highlight);
            /* Hover auf Disabled Highlight entfernen */
            box-shadow: 0 2px 4px var(--md-sys-shadow-color);
            color: var(--md-sys-color-on-surface-container);
            /* Textfarbe zurücksetzen */
        }


        #feedback {
            margin-bottom: 20px;
            /* Mehr Abstand */
            font-weight: bold;
            font-size: 1em;
            /* NEU: Kleinere Schriftgröße für Feedback */
            min-height: 1.5em;
            /* NEU: Größere Mindesthöhe für stabiles Layout */
            display: flex;
            /* Flexbox für Zentrierung */
            justify-content: center;
            align-items: center;
            transition: color 0.3s ease;
        }

        #feedback.richtig {
            color: var(--md-sys-color-success);
            /* Farbe aus Palette */
        }

        #feedback.falsch {
            color: var(--md-sys-color-error);
            /* Farbe aus Palette */
        }

        #neueAufgabe {
            background-color: var(--md-sys-color-primary);
            /* Hintergrund aus Palette (Primary Filled Button) */
            color: var(--md-sys-color-on-primary);
            /* Textfarbe aus Palette */
            border: none;
            padding: 14px 28px;
            /* Mehr Padding für eine prominentere Schaltfläche */
            border-radius: 28px;
            /* Stärker abgerundete Ecken (Pill-Form angestrebt) */
            cursor: pointer;
            font-size: 1.1em;
            /* Größer */
            transition: background-color 0.2s ease, box-shadow 0.2s ease, color 0.2s ease;
            box-shadow: 0 2px 4px var(--md-sys-shadow-color);
            /* Subtiler Schatten */
        }

        #neueAufgabe:hover {
            background-color: #553e91;
            /* Dunkler beim Hover (Beispiel) */
            box-shadow: 0 3px 6px var(--md-sys-shadow-color);
            /* Schatten beim Hover erhöhen */
        }
    </style>
</head>

<body>
        <div class="widget">
                <p id="aufgabe"></p>
                <div class="antworten">
                        <button id="antwort1"></button>
                        <button id="antwort2"></button>
                        <button id="antwort3"></button>
                        <button id="antwort4"></button>
                    </div>
                <p id="feedback"></p>
                <button id="neueAufgabe">Nächste Aufgabe</button>
            </div>

       
    <script>
        const aufgabeElement = document.getElementById('aufgabe');
        const antwortButtons = document.querySelectorAll('.antworten button');
        const feedbackElement = document.getElementById('feedback');
        const neueAufgabeButton = document.getElementById('neueAufgabe');

        let aktuelleAufgabe;

        function generiereAufgabe() {
            const zahl1 = Math.floor(Math.random() * 20) + 1; // Zufällige Zahl zwischen 1 und 20
            let zahl2 = Math.floor(Math.random() * 19) + 1; // Zufällige Zahl zwischen 1 und 19 (um Division durch 0 zu vermeiden)
            const operationen = ['+', '-', '*', '/'];
            let zufaelligeOperation = operationen[Math.floor(Math.random() * operationen.length)]; // Mache variable, falls Division angepasst wird

            let richtigeAntwort;
            switch (zufaelligeOperation) {
                case '+':
                    richtigeAntwort = zahl1 + zahl2;
                    break;
                case '-':
                    richtigeAntwort = zahl1 - zahl2;
                    break;
                case '*':
                    richtigeAntwort = zahl1 * zahl2;
                    break;
                case '/':
                    // Stelle sicher, dass die Division aufgeht und vermeide Division durch 0
                    if (zahl2 !== 0 && zahl1 % zahl2 === 0) {
                        richtigeAntwort = zahl1 / zahl2;
                    } else {
                        // Wenn die Division nicht aufgeht, wähle eine andere Operation
                        const andereOperationen = ['+', '-', '*'];
                        zufaelligeOperation = andereOperationen[Math.floor(Math.random() * andereOperationen.length)]; // Aktualisiere die Operation
                        if (zufaelligeOperation === '+') {
                            richtigeAntwort = zahl1 + zahl2;
                        } else if (zufaelligeOperation === '-') {
                            richtigeAntwort = zahl1 - zahl2;
                        } else {
                            richtigeAntwort = zahl1 * zahl2;
                        }
                    }
                    break;
            }

            aktuelleAufgabe = {
                frage: `${zahl1} ${zufaelligeOperation} ${zahl2} = ?`,
                richtigeAntwort: richtigeAntwort
            };
        }

        function generiereAntworten() {
            const richtigeAntwort = aktuelleAufgabe.richtigeAntwort;
            const falscheAntworten = [];
            // Stelle sicher, dass falsche Antworten nicht die richtige Antwort sind und sich unterscheiden
            while (falscheAntworten.length < 3) {
                // Generiere eine zufällige Antwort in einem plausiblen Bereich
                let zufaelligeAntwort;
                // Versuche Antworten nahe der richtigen Antwort, aber nicht zu weit weg
                const abweichung = Math.floor(Math.random() * 10) - 5; // Zufällige Abweichung von -5 bis +4
                zufaelligeAntwort = richtigeAntwort + abweichung;

                // Stelle sicher, dass die generierte Antwort eine Ganzzahl ist (bei Addition/Subtraktion/Multiplikation)
                // Bei Division mit ganzzahligen Ergebnissen sind alle Antworten Ganzzahlen.
                zufaelligeAntwort = Math.round(zufaelligeAntwort);

                // Zusätzliche Prüfungen, um extreme oder unpassende falsche Antworten zu vermeiden
                // Beispiel: Wenn richtige Antwort 2 ist, vermeiden wir -100 als falsche Antwort.
                // Wenn richtige Antwort positiv ist, vermeiden wir sehr kleine oder sehr große negative Zahlen
                if (richtigeAntwort >= 0 && zufaelligeAntwort < -10) continue; // Wenn richtige Antwort positiv ist, keine extrem negativen falschen
                if (richtigeAntwort < 0 && zufaelligeAntwort > 10) continue; // Wenn richtige Antwort negativ, keine extrem positiven falschen


                if (zufaelligeAntwort !== richtigeAntwort && !falscheAntworten.includes(zufaelligeAntwort)) {
                    falscheAntworten.push(zufaelligeAntwort);
                }
            }

            const alleAntworten = [...falscheAntworten, richtigeAntwort];
            // Zufällige Anordnung der Antworten
            for (let i = alleAntworten.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [alleAntworten[i], alleAntworten[j]] = [alleAntworten[j], alleAntworten[i]];
            }

            antwortButtons.forEach((button, index) => {
                button.textContent = alleAntworten[index];
                button.onclick = () => ueberpruefeAntwort(parseInt(button.textContent)); // Text als Zahl parsen
                button.disabled = false; // Buttons bei neuer Aufgabe aktivieren
                button.classList.remove('correct-answer-highlight'); // Hervorhebung entfernen
            });
        }

        function zeigeAufgabe() {
            aufgabeElement.textContent = aktuelleAufgabe.frage;
            feedbackElement.textContent = ''; // Feedback zurücksetzen
            feedbackElement.className = '';
        }

        function ueberpruefeAntwort(gewaehlteAntwort) {
            // Buttons nach der Antwort deaktivieren, damit man nicht mehrmals klickt
            antwortButtons.forEach(button => button.disabled = true);

            if (gewaehlteAntwort === aktuelleAufgabe.richtigeAntwort) {
                feedbackElement.textContent = 'Richtig!';
                feedbackElement.className = 'richtig';
            } else {
                feedbackElement.textContent = `Falsch. Die richtige Antwort ist ${aktuelleAufgabe.richtigeAntwort}.`;
                feedbackElement.className = 'falsch';
            }

            // Richtige Antwort hervorheben
            const correctAnswerValue = aktuelleAufgabe.richtigeAntwort;
            antwortButtons.forEach(button => {
                if (parseInt(button.textContent) === correctAnswerValue) {
                    button.classList.add('correct-answer-highlight');
                }
            });
        }

        function starteSpiel() {
            // Hervorhebung von vorheriger Aufgabe entfernen (auch hier, falls man "Nächste Aufgabe" schnell drückt)
            antwortButtons.forEach(button => {
                button.classList.remove('correct-answer-highlight');
            });

            generiereAufgabe();
            generiereAntworten();
            zeigeAufgabe();
        }

        neueAufgabeButton.addEventListener('click', starteSpiel);

        starteSpiel(); // Spiel beim Laden der Seite starten
    </script>
</body>

</html>