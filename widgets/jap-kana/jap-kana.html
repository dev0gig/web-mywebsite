<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hiragana & Katakana Übung</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: transparent; /* Transparenter Hintergrund */
            color: #f8f8f2; /* Helle Textfarbe */
            margin: 0;
        }

        .controls {
            display: flex;
            flex-direction: column;
            margin-right: 20px; /* Abstand zum Widget */
        }

        .control-button {
            background-color: #6272a4; /* Dunklerer Button-Hintergrund */
            color: #f8f8f2;
            border: none;
            border-radius: 4px;
            width: 50px; /* Feste Breite */
            height: 50px; /* Feste Höhe */
            font-size: 24px; /* Größere Schrift für die Zeichen */
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-bottom: 10px; /* Abstand zwischen den Buttons */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .control-button:hover {
            background-color: #44475a; /* Noch dunklerer Button-Hintergrund beim Hover */
        }

        .container {
            background-color: #282a36; /* Dunkler Container-Hintergrund */
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4); /* Dunklerer Schatten */
            padding: 30px;
            text-align: center;
            height: 330px; /* Feste Höhe */
            width: 200px; /* Feste Breite */
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* Verteilt den Inhalt vertikal */
        }

        .progress-bar-container {
            background-color: #44475a; /* Dunklerer Fortschrittsbalken-Hintergrund */
            border-radius: 5px;
            height: 10px; /* Feste Höhe */
            margin-bottom: 10px; /* Weniger Abstand */
            overflow: hidden;
        }

        .progress-bar {
            background-color: #50fa7b; /* Helle Akzentfarbe für den Fortschritt */
            height: 100%;
            width: 0%;
            border-radius: 5px;
        }

        .question-container {
            margin-bottom: 10px; /* Weniger Abstand */
            height: 100px; /* Feste Höhe für den Fragebereich */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .japanese-char {
            font-size: 80px;
        }

        .answer-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* Zwei Buttons pro Reihe */
            gap: 10px;
            margin-bottom: 10px; /* Weniger Abstand */
        }

        .answer-button {
            background-color: #6272a4; /* Dunklerer Button-Hintergrund */
            color: #f8f8f2;
            border: none;
            border-radius: 4px;
            width: 80px; /* Feste Breite für Antwortbuttons */
            height: 40px; /* Feste Höhe für Antwortbuttons */
            font-size: 16px; /* Kleinere Schrift */
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .answer-button:hover {
            background-color: #44475a; /* Noch dunklerer Button-Hintergrund beim Hover */
        }

        .feedback {
            font-weight: bold;
            font-size: 16px; /* Kleinere Schrift */
            height: 20px; /* Feste Höhe für Feedback */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .feedback.correct {
            color: #50fa7b; /* Helle Farbe für korrekte Rückmeldung */
        }

        .feedback.incorrect {
            color: #ff5555; /* Helle Farbe für falsche Rückmeldung */
        }
    </style>
</head>
<body>
    <div class="controls">
        <button class="control-button" id="romanji-to-kana">a</button>
        <button class="control-button" id="kana-to-romanji">あ</button>
    </div>
    <div class="container">
        <div class="progress-bar-container">
            <div class="progress-bar"></div>
        </div>
        <div class="question-container">
            <div class="japanese-char"></div>
        </div>
        <div class="answer-buttons">
            <button class="answer-button" data-answer=""></button>
            <button class="answer-button" data-answer=""></button>
            <button class="answer-button" data-answer=""></button>
            <button class="answer-button" data-answer=""></button>
        </div>
        <div class="feedback"></div>
    </div>
    <script>
        const romanjiToKanaButton = document.getElementById('romanji-to-kana');
        const kanaToRomanjiButton = document.getElementById('kana-to-romanji');
        const japaneseCharElement = document.querySelector('.japanese-char');
        const answerButtonsElement = document.querySelector('.answer-buttons');
        const answerButtonElements = document.querySelectorAll('.answer-button');
        const feedbackElement = document.querySelector('.feedback');
        const progressBarElement = document.querySelector('.progress-bar');

        const allKana = [
            { char: 'あ', romanji: 'a' }, { char: 'い', romanji: 'i' }, { char: 'う', romanji: 'u' }, { char: 'え', romanji: 'e' }, { char: 'お', romanji: 'o' },
            { char: 'か', romanji: 'ka' }, { char: 'き', romanji: 'ki' }, { char: 'く', romanji: 'ku' }, { char: 'け', romanji: 'ke' }, { char: 'こ', romanji: 'ko' },
            { char: 'さ', romanji: 'sa' }, { char: 'し', romanji: 'shi' }, { char: 'す', romanji: 'su' }, { char: 'せ', romanji: 'se' }, { char: 'そ', romanji: 'so' },
            { char: 'た', romanji: 'ta' }, { char: 'ち', romanji: 'chi' }, { char: 'つ', romanji: 'tsu' }, { char: 'て', romanji: 'te' }, { char: 'と', romanji: 'to' },
            { char: 'な', romanji: 'na' }, { char: 'に', romanji: 'ni' }, { char: 'ぬ', romanji: 'nu' }, { char: 'ね', romanji: 'ne' }, { char: 'の', romanji: 'no' },
            { char: 'は', romanji: 'ha' }, { char: 'ひ', romanji: 'hi' }, { char: 'ふ', romanji: 'fu' }, { char: 'へ', romanji: 'he' }, { char: 'ほ', romanji: 'ho' },
            { char: 'ま', romanji: 'ma' }, { char: 'み', romanji: 'mi' }, { char: 'む', romanji: 'mu' }, { char: 'め', romanji: 'me' }, { char: 'も', romanji: 'mo' },
            { char: 'や', romanji: 'ya' }, { char: 'ゆ', romanji: 'yu' }, { char: 'よ', romanji: 'yo' },
            { char: 'ら', romanji: 'ra' }, { char: 'り', romanji: 'ri' }, { char: 'る', romanji: 'ru' }, { char: 'れ', romanji: 're' }, { char: 'ろ', romanji: 'ro' },
            { char: 'わ', romanji: 'wa' }, { char: 'を', romanji: 'wo' }, { char: 'ん', romanji: 'n' },
            { char: 'ア', romanji: 'a' }, { char: 'イ', romanji: 'i' }, { char: 'ウ', romanji: 'u' }, { char: 'エ', romanji: 'e' }, { char: 'オ', romanji: 'o' },
            { char: 'カ', romanji: 'ka' }, { char: 'キ', romanji: 'ki' }, { char: 'ク', romanji: 'ku' }, { char: 'ケ', romanji: 'ke' }, { char: 'コ', romanji: 'ko' },
            { char: 'サ', romanji: 'sa' }, { char: 'シ', romanji: 'shi' }, { char: 'ス', romanji: 'su' }, { char: 'セ', romanji: 'se' }, { char: 'ソ', romanji: 'so' },
            { char: 'タ', romanji: 'ta' }, { char: 'チ', romanji: 'chi' }, { char: 'ツ', romanji: 'tsu' }, { char: 'テ', romanji: 'te' }, { char: 'ト', romanji: 'to' },
            { char: 'ナ', romanji: 'na' }, { char: 'ニ', romanji: 'ni' }, { char: 'ヌ', romanji: 'nu' }, { char: 'ネ', romanji: 'ne' }, { char: 'ノ', romanji: 'no' },
            { char: 'ハ', romanji: 'ha' }, { char: 'ヒ', romanji: 'hi' }, { char: 'フ', romanji: 'fu' }, { char: 'ヘ', romanji: 'he' }, { char: 'ホ', romanji: 'ho' },
            { char: 'マ', romanji: 'ma' }, { char: 'ミ', romanji: 'mi' }, { char: 'ム', romanji: 'mu' }, { char: 'メ', romanji: 'me' }, { char: 'モ', romanji: 'mo' },
            { char: 'ヤ', romanji: 'ya' }, { char: 'ユ', romanji: 'yu' }, { char: 'ヨ', romanji: 'yo' },
            { char: 'ラ', romanji: 'ra' }, { char: 'リ', romanji: 'ri' }, { char: 'ル', romanji: 'ru' }, { char: 'レ', romanji: 're' }, { char: 'ロ', romanji: 'ro' },
            { char: 'ワ', romanji: 'wa' }, { char: 'を', romanji: 'wo' }, { char: 'ン', romanji: 'n' }
        ];

        let currentQuestion = null;
        let currentSet = [];
        let questionIndex = 0;
        let totalQuestions = allKana.length;
        let correctAnswers = 0;
        let practiceRomanjiToKana = true; // Startmodus: Romanji zu Kana

        function selectCharacterSet() {
            currentSet = [...allKana];
            currentSet = shuffleArray(currentSet);
            totalQuestions = currentSet.length;
            questionIndex = 0;
            correctAnswers = 0;
            updateProgressBar();
            nextQuestion();
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function nextQuestion() {
            if (questionIndex < currentSet.length) {
                currentQuestion = currentSet[questionIndex];
                if (practiceRomanjiToKana) {
                    japaneseCharElement.textContent = currentQuestion.romanji;
                    setupAnswerButtons(currentQuestion.char);
                } else {
                    japaneseCharElement.textContent = currentQuestion.char;
                    setupAnswerButtons(currentQuestion.romanji);
                }
                feedbackElement.textContent = '';
                updateProgressBar();
                questionIndex++;
            } else {
                feedbackElement.textContent = `Fertig! Du hast ${correctAnswers} von ${totalQuestions} richtig.`;
                answerButtonElements.forEach(button => button.disabled = true);
            }
        }

        function setupAnswerButtons(correctAnswer) {
            const incorrectAnswers = getIncorrectAnswers(correctAnswer);
            const allAnswers = shuffleArray([correctAnswer, ...incorrectAnswers]);

            answerButtonElements.forEach((button, index) => {
                button.textContent = allAnswers[index];
                button.dataset.answer = allAnswers[index];
                button.onclick = () => checkAnswer(button.dataset.answer, correctAnswer);
                button.disabled = false;
            });
        }

        function getIncorrectAnswers(correctAnswer) {
            const allPossibleAnswers = practiceRomanjiToKana
                ? allKana.map(k => k.char)
                : allKana.map(k => k.romanji);
            const uniqueAnswers = [...new Set(allPossibleAnswers)];
            const incorrect = [];
            while (incorrect.length < 3) {
                const randomIndex = Math.floor(Math.random() * uniqueAnswers.length);
                const randomAnswer = uniqueAnswers[randomIndex];
                if (randomAnswer !== correctAnswer && !incorrect.includes(randomAnswer)) {
                    incorrect.push(randomAnswer);
                }
            }
            return incorrect;
        }

        function checkAnswer(selectedAnswer, correctAnswer) {
            answerButtonElements.forEach(button => button.disabled = true);

            if (selectedAnswer === correctAnswer) {
                feedbackElement.textContent = 'Richtig!';
                feedbackElement.className = 'feedback correct';
                correctAnswers++;
            } else {
                feedbackElement.textContent = `Falsch. Die richtige Antwort ist: ${correctAnswer}`;
                feedbackElement.className = 'feedback incorrect';
            }

            setTimeout(nextQuestion, 1500);
        }

        function updateProgressBar() {
            const progress = (questionIndex / totalQuestions) * 100;
            progressBarElement.style.width = `${progress}%`;
        }

        romanjiToKanaButton.addEventListener('click', () => {
            practiceRomanjiToKana = true;
            selectCharacterSet();
        });

        kanaToRomanjiButton.addEventListener('click', () => {
            practiceRomanjiToKana = false;
            selectCharacterSet();
        });

        // Initialisierung
        selectCharacterSet();
    </script>
</body>
</html>